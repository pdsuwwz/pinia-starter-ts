import{d as L,I as S,J as k,i as l,s as I,u as C,f as R,K as x,n as A,L as E,E as T,H as U,M as $,k as q,_ as B,o as D,b as M,e as o,t as P,g as u,w as V,q as F,r as p,p as N,h as O}from"./index-hKEVD6Ox.js";import j from"./ContainerLayout-d7n9ay88.js";import{T as z}from"./Translations--LXPY4OD.js";import{_ as H}from"./pinia-unKfjad7.js";import"./lodash-y73kkvZr.js";const J=L({name:"UserAccountLogin",components:{UserAccountContainerLayout:j,Promotion:S,Translations:z},setup(){const{proxy:e}=q(),m=k(),g=U(),_=$(),a=l(!0),n=l(""),s=l(""),c=I({email:"vite.admin@gmail.com",password:"123456"}),t=C(),f=R(()=>({title:t.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:a.value,size:"large"},text:t.t("login.signin"),on:{click(i){e.onSubmit(i)}}}],formConfig:[{attrs:{prop:"email",error:n.value,rules(){return[e.getRequiredRules({trigger:"change",message:t.t("login.plsemail")}),e.getValidatorRules("","blur",{type:"email",message:t.t("login.plscurrentemail")})]}},label:t.t("login.email"),prefixIcon:"user-tie",placeholder:t.t("login.plsemail")},{attrs:{prop:"password",error:s.value,rules(){return e.getRequiredRules({trigger:"change",message:t.t("login.plspwd")})}},link:{text:t.t("login.fgtpwd"),click(){}},type:"password",label:t.t("login.pwd"),prefixIcon:"lock",placeholder:t.t("login.plspwd")}]}));function r(i=!1){a.value=i}function v(i){a.value||i.validate(async h=>{if(!h)return;n.value="",s.value="",r(!0);const{error:y,data:w,msg:b}=await m.login(c);if(y){n.value=" ",s.value=b,r(!1);return}E.set("token",w.user.token),_.replace(`/${g.params.locale||""}`).then(()=>{T.success({message:"登录成功"})}).catch(()=>{})})}return r(!0),x(()=>{A(()=>{r(!1)})}),{isLoading:a,inputErrorEmail:n,inputErrorPassword:s,formData:c,configLogin:f,setLoading:r,onSubmit:v}}}),d=e=>(N("data-v-de33ae7c"),e=e(),O(),e),K={class:"user-account-login"},G={class:"user-account-nav"},Q={class:"nav-left"},W=d(()=>o("div",{class:"nav-logo"},null,-1)),X=d(()=>o("div",{class:"nav-circle"},null,-1)),Y={class:"nav-title"},Z={class:"nav-right"},ee={class:"user-account-body"},te=d(()=>o("img",{src:H,alt:""},null,-1));function oe(e,m,g,_,a,n){const s=p("Translations"),c=p("UserAccountContainerLayout"),t=p("Footer");return D(),M("div",K,[o("div",G,[o("div",Q,[W,X,o("div",Y,P(e._t("base.systemTitle")),1)]),o("div",Z,[u(s)])]),o("div",ee,[u(c,F(e.configLogin,{"form-data":e.formData,onOnSubmit:e.onSubmit}),{titleIcon:V(()=>[te]),_:1},16,["form-data","onOnSubmit"])]),u(t)])}const ce=B(J,[["render",oe],["__scopeId","data-v-de33ae7c"]]);export{ce as default};

import{d as I,U as L,N as k,J as C,I as x,f as l,D as A,v as R,h as E,V as T,z as U,K as v,E as $,A as B,_ as D,o as F,b as V,e as o,t as q,g as u,w as N,C as P,r as d,q as z,u as M}from"./index.e0553679.js";import O from"./ContainerLayout.b630585f.js";import{T as j}from"./Translations.94414ac8.js";import{_ as J}from"./pinia.84339ab1.js";import"./lodash.dd797249.js";const K=I({name:"UserAccountLogin",components:{UserAccountContainerLayout:O,Promotion:L,Translations:j},setup(){const{proxy:e}=B(),m=k(),g=C(),_=x(),a=l(!0),n=l(""),s=l(""),c=A({email:"vite.admin@gmail.com",password:"123456"}),t=R(),h=E(()=>({title:t.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:a.value,size:"large"},text:t.t("login.signin"),on:{click(i){e.onSubmit(i)}}}],formConfig:[{attrs:{prop:"email",error:n.value,rules(){return[e.getRequiredRules({trigger:"change",message:t.t("login.plsemail")}),e.getValidatorRules("","blur",{type:"email",message:t.t("login.plscurrentemail")})]}},label:t.t("login.email"),prefixIcon:"user-tie",placeholder:t.t("login.plsemail")},{attrs:{prop:"password",error:s.value,rules(){return e.getRequiredRules({trigger:"change",message:t.t("login.plspwd")})}},link:{text:t.t("login.fgtpwd"),click(){}},type:"password",label:t.t("login.pwd"),prefixIcon:"lock",placeholder:t.t("login.plspwd")}]}));function r(i=!1){a.value=i}function y(i){a.value||i.validate(async w=>{if(!w)return;n.value="",s.value="",r(!0);const{error:b,data:f,msg:S}=await m.login(c);if(b){n.value=" ",s.value=S,r(!1);return}v.set("token",f.user.token),v.set("name",f.user.username),_.replace(`/${g.params.locale||""}`).then(()=>{$.success({message:"\u767B\u5F55\u6210\u529F"})}).catch(()=>{})})}return r(!0),T(()=>{U(()=>{r(!1)})}),{isLoading:a,inputErrorEmail:n,inputErrorPassword:s,formData:c,configLogin:h,setLoading:r,onSubmit:y}}});const p=e=>(z("data-v-2ffcddaa"),e=e(),M(),e),G={class:"user-account-login"},H={class:"user-account-nav"},Q={class:"nav-left"},W=p(()=>o("div",{class:"nav-logo"},null,-1)),X=p(()=>o("div",{class:"nav-circle"},null,-1)),Y={class:"nav-title"},Z={class:"nav-right"},ee={class:"user-account-body"},te=p(()=>o("img",{src:J,alt:""},null,-1));function oe(e,m,g,_,a,n){const s=d("Translations"),c=d("UserAccountContainerLayout"),t=d("Footer");return F(),V("div",G,[o("div",H,[o("div",Q,[W,X,o("div",Y,q(e._t("base.systemTitle")),1)]),o("div",Z,[u(s)])]),o("div",ee,[u(c,P(e.configLogin,{"form-data":e.formData,onOnSubmit:e.onSubmit}),{titleIcon:N(()=>[te]),_:1},16,["form-data","onOnSubmit"])]),u(t)])}const ce=D(K,[["render",oe],["__scopeId","data-v-2ffcddaa"]]);export{ce as default};

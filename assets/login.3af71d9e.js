import{_ as L,d as k,U as _,u as I,N as R,J as S,I as A,f as c,G as C,x as E,h as T,V as U,A as q,o as D,b as O,e,t as P,g as u,w as V,C as z,K as b,E as j,q as F,v as G,r as g}from"./index.573e0c2b.js";import J from"./ContainerLayout.d34afe11.js";import{T as K}from"./Translations.961b7cc0.js";import{_ as N}from"./pinia.8a788826.js";import"./lodash.d13857ad.js";const $=k({name:"UserAccountLogin",components:{UserAccountContainerLayout:J,Promotion:_,Translations:K},setup(){const{proxy:a}=I(),d=R(),p=S(),v=A(),o=c(!0),r=c(""),t=c(""),l=C({email:"vite.admin@gmail.com",password:"123456"}),s=E(),y=T(()=>({title:s.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:o.value,size:"large"},text:s.t("login.signin"),on:{click(i){a.onSubmit(i)}}}],formConfig:[{attrs:{prop:"email",error:r.value,rules:()=>[a.getRequiredRules({trigger:"change",message:s.t("login.plsemail")}),a.getValidatorRules("","blur",{type:"email",message:s.t("login.plscurrentemail")})]},label:s.t("login.email"),prefixIcon:"user-tie",placeholder:s.t("login.plsemail")},{attrs:{prop:"password",error:t.value,rules:()=>a.getRequiredRules({trigger:"change",message:s.t("login.plspwd")})},link:{text:s.t("login.fgtpwd"),click(){}},type:"password",label:s.t("login.pwd"),prefixIcon:"lock",placeholder:s.t("login.plspwd")}]}));function n(i=!1){o.value=i}return n(!0),U(()=>{q(()=>{n(!1)})}),{isLoading:o,inputErrorEmail:r,inputErrorPassword:t,formData:l,configLogin:y,setLoading:n,onSubmit:function(i){o.value||i.validate(async h=>{if(!h)return;r.value="",t.value="",n(!0);const{error:w,data:f,msg:x}=await d.login(l);if(w)return r.value=" ",t.value=x,void n(!1);b.set("token",f.user.token),b.set("name",f.user.username),v.replace(`/${p.params.locale||""}`).then(()=>{j.success({message:"\u767B\u5F55\u6210\u529F"})}).catch(()=>{})})}}}}),m=a=>(F("data-v-11ad5494"),a=a(),G(),a),B={class:"user-account-login"},H={class:"user-account-nav"},M={class:"nav-left"},Q=m(()=>e("div",{class:"nav-logo"},null,-1)),W=m(()=>e("div",{class:"nav-circle"},null,-1)),X={class:"nav-title"},Y={class:"nav-right"},Z={class:"user-account-body"},aa=m(()=>e("img",{src:N,alt:""},null,-1));var na=L($,[["render",function(a,d,p,v,o,r){const t=g("Translations"),l=g("UserAccountContainerLayout"),s=g("Footer");return D(),O("div",B,[e("div",H,[e("div",M,[Q,W,e("div",X,P(a._t("base.systemTitle")),1)]),e("div",Y,[u(t)])]),e("div",Z,[u(l,z(a.configLogin,{"form-data":a.formData,onOnSubmit:a.onSubmit}),{titleIcon:V(()=>[aa]),_:1},16,["form-data","onOnSubmit"])]),u(s)])}],["__scopeId","data-v-11ad5494"]]);export{na as default};

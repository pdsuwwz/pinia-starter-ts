import C from"./ContainerLayout.25ad557d.js";import{T as I}from"./Translations.4aa3a144.js";import{d as b,H as R,o as h,b as y,e as s,_ as S,u as A,N as E,J as T,I as U,f as g,G as q,x as z,h as P,U as D,A as O,t as V,g as d,w as B,C as F,K as w,E as G,q as j,v as H,r as p}from"./index.c10c9970.js";import{_ as J}from"./pinia.8a788826.js";import"./lodash.d750dac0.js";const K=b({name:"Promotion"}),N={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},$=[s("path",{fill:"currentColor",d:"m64 448 832-320-128 704-446.08-243.328L832 192 242.816 545.472 64 448zm256 512V657.024L512 768 320 960z"},null,-1)],M=b({name:"UserAccountLogin",components:{UserAccountContainerLayout:C,Promotion:R(K,[["render",function(a,c,u,m,t,o){return h(),y("svg",N,$)}]]),Translations:I},setup(){const{proxy:a}=A(),c=E(),u=T(),m=U(),t=g(!0),o=g(""),r=g(""),l=q({email:"vite.admin@gmail.com",password:"123456"}),e=z(),L=P(()=>({title:e.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:t.value,size:"large"},text:e.t("login.signin"),on:{click(i){a.onSubmit(i)}}}],formConfig:[{attrs:{prop:"email",error:o.value,rules:()=>[a.getRequiredRules({trigger:"change",message:e.t("login.plsemail")}),a.getValidatorRules("","blur",{type:"email",message:e.t("login.plscurrentemail")})]},label:e.t("login.email"),prefixIcon:"user-tie",placeholder:e.t("login.plsemail")},{attrs:{prop:"password",error:r.value,rules:()=>a.getRequiredRules({trigger:"change",message:e.t("login.plspwd")})},link:{text:e.t("login.fgtpwd"),click(){}},type:"password",label:e.t("login.pwd"),prefixIcon:"lock",placeholder:e.t("login.plspwd")}]}));function n(i=!1){t.value=i}return n(!0),D(()=>{O(()=>{n(!1)})}),{isLoading:t,inputErrorEmail:o,inputErrorPassword:r,formData:l,configLogin:L,setLoading:n,onSubmit:function(i){t.value||i.validate(async x=>{if(!x)return;o.value="",r.value="",n(!0);const{error:k,data:f,msg:_}=await c.login(l);if(k)return o.value=" ",r.value=_,void n(!1);w.set("token",f.user.token),w.set("name",f.user.username),m.replace(`/${u.params.locale||""}`).then(()=>{G.success({message:"\u767B\u5F55\u6210\u529F"})}).catch(()=>{})})}}}}),v=a=>(j("data-v-11ad5494"),a=a(),H(),a),Q={class:"user-account-login"},W={class:"user-account-nav"},X={class:"nav-left"},Y=v(()=>s("div",{class:"nav-logo"},null,-1)),Z=v(()=>s("div",{class:"nav-circle"},null,-1)),aa={class:"nav-title"},ea={class:"nav-right"},sa={class:"user-account-body"},ta=v(()=>s("img",{src:J,alt:""},null,-1));var ca=S(M,[["render",function(a,c,u,m,t,o){const r=p("Translations"),l=p("UserAccountContainerLayout"),e=p("Footer");return h(),y("div",Q,[s("div",W,[s("div",X,[Y,Z,s("div",aa,V(a._t("base.systemTitle")),1)]),s("div",ea,[d(r)])]),s("div",sa,[d(l,F(a.configLogin,{"form-data":a.formData,onOnSubmit:a.onSubmit}),{titleIcon:B(()=>[ta]),_:1},16,["form-data","onOnSubmit"])]),d(e)])}],["__scopeId","data-v-11ad5494"]]);export{ca as default};

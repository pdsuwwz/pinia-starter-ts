import j from"./ContainerLayout.2572a119.js";import{T as x}from"./Translations.0893581a.js";import{g as k,a8 as S,u as I,i as R,L as c,S as T,Y as _,j as C,a9 as A,X as E,r as u,o as O,t as U,v as e,I as q,n as m,m as D,H as P,d as y,M as $,O as z}from"./vendor.d4a3ff03.js";import{_ as F,u as H,b as M}from"./index.ec8dc9f6.js";import{_ as V}from"./pinia.8a788826.js";import"./lodash.6af704d4.js";const X=k({name:"UserAccountLogin",components:{UserAccountContainerLayout:j,Promotion:S,Translations:x},setup(){const{proxy:a}=H(),g=M(),p=I(),v=R(),o=c(!0),n=c(""),t=c(""),l=T({email:"vite.admin@gmail.com",password:"123456"}),s=_(),b=C(()=>({title:s.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:o.value,size:"large"},text:s.t("login.signin"),on:{click(r){a.onSubmit(r)}}}],formConfig:[{attrs:{prop:"email",error:n.value,rules:()=>[a.getRequiredRules({trigger:"change",message:s.t("login.plsemail")}),a.getValidatorRules("","blur",{type:"email",message:s.t("login.plscurrentemail")})]},label:s.t("login.email"),prefixIcon:"user-tie",placeholder:s.t("login.plsemail")},{attrs:{prop:"password",error:t.value,rules:()=>a.getRequiredRules({trigger:"change",message:s.t("login.plspwd")})},link:{text:s.t("login.fgtpwd"),click(){}},type:"password",label:s.t("login.pwd"),prefixIcon:"lock",placeholder:s.t("login.plspwd")}]}));function i(r=!1){o.value=r}return i(!0),A(()=>{E(()=>{i(!1)})}),{isLoading:o,inputErrorEmail:n,inputErrorPassword:t,formData:l,configLogin:b,setLoading:i,onSubmit:function(r){o.value||r.validate(async L=>{if(!L)return;n.value="",t.value="",i(!0);const{error:h,data:f,msg:w}=await g.login(l);if(h)return n.value=" ",t.value=w,void i(!1);y.set("token",f.user.token),y.set("name",f.user.username),v.replace(`/${p.params.locale||""}`).then(()=>{a.$message({type:"success",message:"\u767B\u5F55\u6210\u529F"})}).catch(()=>{})})}}}}),d=a=>($("data-v-15d4d422"),a=a(),z(),a),Y={class:"user-account-login"},B={class:"user-account-nav"},G={class:"nav-left"},J=d(()=>e("div",{class:"nav-logo"},null,-1)),K=d(()=>e("div",{class:"nav-circle"},null,-1)),N={class:"nav-title"},Q={class:"nav-right"},W={class:"user-account-body"},Z=d(()=>e("img",{src:V,alt:""},null,-1));var ia=F(X,[["render",function(a,g,p,v,o,n){const t=u("Translations"),l=u("UserAccountContainerLayout"),s=u("Footer");return O(),U("div",Y,[e("div",B,[e("div",G,[J,K,e("div",N,q(a._t("base.systemTitle")),1)]),e("div",Q,[m(t)])]),e("div",W,[m(l,P(a.configLogin,{"form-data":a.formData,onOnSubmit:a.onSubmit}),{titleIcon:D(()=>[Z]),_:1},16,["form-data","onOnSubmit"])]),m(s)])}],["__scopeId","data-v-15d4d422"]]);export{ia as default};

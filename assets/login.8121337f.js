import x from"./ContainerLayout.33e760eb.js";import{T as j}from"./Translations.ff0d842a.js";import{s as k,a8 as _,u as I,h as R,L as c,Q as S,W as T,i as C,a9 as A,V as E,r as u,o as U,t as $,v as e,I as q,m,l as D,H as O,d as b,$ as P,a0 as V}from"./vendor.64f17b98.js";import{_ as z,u as F,b as H}from"./index.9514457a.js";import{_ as Q}from"./pinia.8a788826.js";import"./lodash.b0f84347.js";const W=k({name:"UserAccountLogin",components:{UserAccountContainerLayout:x,Promotion:_,Translations:j},setup(){const{proxy:a}=F(),d=H(),p=I(),v=R(),o=c(!0),i=c(""),t=c(""),l=S({email:"vite.admin@gmail.com",password:"123456"}),s=T(),y=C(()=>({title:s.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:o.value,size:"large"},text:s.t("login.signin"),on:{click(r){a.onSubmit(r)}}}],formConfig:[{attrs:{prop:"email",error:i.value,rules:()=>[a.getRequiredRules({trigger:"change",message:s.t("login.plsemail")}),a.getValidatorRules("","blur",{type:"email",message:s.t("login.plscurrentemail")})]},label:s.t("login.email"),prefixIcon:"user-tie",placeholder:s.t("login.plsemail")},{attrs:{prop:"password",error:t.value,rules:()=>a.getRequiredRules({trigger:"change",message:s.t("login.plspwd")})},link:{text:s.t("login.fgtpwd"),click(){}},type:"password",label:s.t("login.pwd"),prefixIcon:"lock",placeholder:s.t("login.plspwd")}]}));function n(r=!1){o.value=r}return n(!0),A(()=>{E(()=>{n(!1)})}),{isLoading:o,inputErrorEmail:i,inputErrorPassword:t,formData:l,configLogin:y,setLoading:n,onSubmit:function(r){o.value||r.validate(async h=>{if(!h)return;i.value="",t.value="",n(!0);const{error:L,data:f,msg:w}=await d.login(l);if(L)return i.value=" ",t.value=w,void n(!1);b.set("token",f.user.token),b.set("name",f.user.username),v.replace(`/${p.params.locale||""}`).then(()=>{a.$message({type:"success",message:"\u767B\u5F55\u6210\u529F"})}).catch(()=>{})})}}}}),g=a=>(P("data-v-74c9722e"),a=a(),V(),a),B={class:"user-account-login"},G={class:"user-account-nav"},J={class:"nav-left"},K=g(()=>e("div",{class:"nav-logo"},null,-1)),M=g(()=>e("div",{class:"nav-circle"},null,-1)),N={class:"nav-title"},X={class:"nav-right"},Y={class:"user-account-body"},Z=g(()=>e("img",{src:Q,alt:""},null,-1));var na=z(W,[["render",function(a,d,p,v,o,i){const t=u("Translations"),l=u("UserAccountContainerLayout"),s=u("Footer");return U(),$("div",B,[e("div",G,[e("div",J,[K,M,e("div",N,q(a._t("base.systemTitle")),1)]),e("div",X,[m(t)])]),e("div",Y,[m(l,O(a.configLogin,{"form-data":a.formData,onOnSubmit:a.onSubmit}),{titleIcon:D(()=>[Z]),_:1},16,["form-data","onOnSubmit"])]),m(s)])}],["__scopeId","data-v-74c9722e"]]);export{na as default};

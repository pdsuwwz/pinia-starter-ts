import{R as k}from"./index-75232f1c.js";import I from"./ContainerLayout-7459f3aa.js";import{T as L}from"./Translations-904a23f1.js";import{u as x,b as C,a as v}from"./request-762bd987.js";import{u as R}from"./index-2f9f74fd.js";import{u as A}from"./useCurrentInstance-7afa7fff.js";import{u as T}from"./index-99a5d9b1.js";import{a3 as E}from"./index-77df8e2e.js";import{x as U,r as l,V as $,e as P,o as V,S as B,ai as D,y as O,z as q,A as t,O as z,P as u,I as F,T as M,a7 as p,ak as N,al as j}from"./_plugin-vue_export-helper-1773af58.js";import{_ as G}from"./pinia-7d910fa0.js";import"./lodash-e9f1b42e.js";import"./_commonjsHelpers-725317a4.js";import"./type-f2772668.js";import"./runtime-dom.esm-bundler-08c0cda0.js";import"./pinia-a0afc3cc.js";import"./index-67d5d8ce.js";const H=U({name:"UserAccountLogin",components:{UserAccountContainerLayout:I,Promotion:k,Translations:L},setup(){const{proxy:o}=A(),d=R(),g=x(),_=C(),a=l(!0),n=l(""),s=l(""),c=$({email:"vite.admin@gmail.com",password:"123456"}),e=T(),h=P(()=>({title:e.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:a.value,size:"large"},text:e.t("login.signin"),on:{click(i){o.onSubmit(i)}}}],formConfig:[{attrs:{prop:"email",error:n.value,rules(){return[o.getRequiredRules({trigger:"change",message:e.t("login.plsemail")}),o.getValidatorRules("","blur",{type:"email",message:e.t("login.plscurrentemail")})]}},label:e.t("login.email"),prefixIcon:"user-tie",placeholder:e.t("login.plsemail")},{attrs:{prop:"password",error:s.value,rules(){return o.getRequiredRules({trigger:"change",message:e.t("login.plspwd")})}},link:{text:e.t("login.fgtpwd"),click(){}},type:"password",label:e.t("login.pwd"),prefixIcon:"lock",placeholder:e.t("login.plspwd")}]}));function r(i=!1){a.value=i}function y(i){a.value||i.validate(async S=>{if(!S)return;n.value="",s.value="",r(!0);const{error:b,data:f,msg:w}=await d.login(c);if(b){n.value=" ",s.value=w,r(!1);return}v.set("token",f.user.token),v.set("name",f.user.username),_.replace(`/${g.params.locale||""}`).then(()=>{E.success({message:"登录成功"})}).catch(()=>{})})}return r(!0),V(()=>{B(()=>{r(!1)})}),{isLoading:a,inputErrorEmail:n,inputErrorPassword:s,formData:c,configLogin:h,setLoading:r,onSubmit:y}}});const m=o=>(N("data-v-2ffcddaa"),o=o(),j(),o),J={class:"user-account-login"},K={class:"user-account-nav"},Q={class:"nav-left"},W=m(()=>t("div",{class:"nav-logo"},null,-1)),X=m(()=>t("div",{class:"nav-circle"},null,-1)),Y={class:"nav-title"},Z={class:"nav-right"},oo={class:"user-account-body"},eo=m(()=>t("img",{src:G,alt:""},null,-1));function to(o,d,g,_,a,n){const s=p("Translations"),c=p("UserAccountContainerLayout"),e=p("Footer");return O(),q("div",J,[t("div",K,[t("div",Q,[W,X,t("div",Y,z(o._t("base.systemTitle")),1)]),t("div",Z,[u(s)])]),t("div",oo,[u(c,M(o.configLogin,{"form-data":o.formData,onOnSubmit:o.onSubmit}),{titleIcon:F(()=>[eo]),_:1},16,["form-data","onOnSubmit"])]),u(e)])}const So=D(H,[["render",to],["__scopeId","data-v-2ffcddaa"]]);export{So as default};

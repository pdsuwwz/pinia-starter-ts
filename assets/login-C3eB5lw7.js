import{d as w,G as C,H as L,h as u,p as k,u as S,f as I,I as R,n as x,J as A,E,D as T,K as U,j as $,_ as D,o as B,b as P,e as s,t as V,g as m,w as j,m as q,r as p}from"./index-ePVCLGRg.js";import F from"./ContainerLayout-BzD2IZhl.js";import{T as M}from"./Translations-BFn_qEj6.js";import{_ as N}from"./pinia-DhWULjGQ.js";import"./lodash-UrjKzBbA.js";const O=w({name:"UserAccountLogin",components:{UserAccountContainerLayout:F,Promotion:C,Translations:M},setup(){const{proxy:t}=$(),o=L(),d=T(),g=U(),a=u(!0),r=u(""),n=u(""),c=k({email:"vite.admin@gmail.com",password:"123456"}),e=S(),f=I(()=>({title:e.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:a.value,size:"large"},text:e.t("login.signin"),on:{click(l){t.onSubmit(l)}}}],formConfig:[{attrs:{prop:"email",error:r.value,rules(){return[t.getRequiredRules({trigger:"change",message:e.t("login.plsemail")}),t.getValidatorRules("","blur",{type:"email",message:e.t("login.plscurrentemail")})]}},label:e.t("login.email"),prefixIcon:"user-tie",placeholder:e.t("login.plsemail")},{attrs:{prop:"password",error:n.value,rules(){return t.getRequiredRules({trigger:"change",message:e.t("login.plspwd")})}},link:{text:e.t("login.fgtpwd"),click(){}},type:"password",label:e.t("login.pwd"),prefixIcon:"lock",placeholder:e.t("login.plspwd")}]}));function i(l=!1){a.value=l}function v(l){a.value||l.validate(async _=>{if(!_)return;r.value="",n.value="",i(!0);const{error:y,data:b,msg:h}=await o.login(c);if(y){r.value=" ",n.value=h,i(!1);return}A.set("token",b.user.token),g.replace(`/${d.params.locale||""}`).then(()=>{E.success({message:"登录成功"})}).catch(()=>{})})}return i(!0),R(()=>{x(()=>{i(!1)})}),{isLoading:a,inputErrorEmail:r,inputErrorPassword:n,formData:c,configLogin:f,setLoading:i,onSubmit:v}}}),z={class:"user-account-login"},G={class:"user-account-nav"},H={class:"nav-left"},J={class:"nav-title"},K={class:"nav-right"},Q={class:"user-account-body"};function W(t,o,d,g,a,r){const n=p("Translations"),c=p("UserAccountContainerLayout"),e=p("CustomFooter");return B(),P("div",z,[s("div",G,[s("div",H,[o[0]||(o[0]=s("div",{class:"nav-logo"},null,-1)),o[1]||(o[1]=s("div",{class:"nav-circle"},null,-1)),s("div",J,V(t._t("base.systemTitle")),1)]),s("div",K,[m(n)])]),s("div",Q,[m(c,q(t.configLogin,{"form-data":t.formData,onOnSubmit:t.onSubmit}),{titleIcon:j(()=>o[2]||(o[2]=[s("img",{src:N,alt:""},null,-1)])),_:1},16,["form-data","onOnSubmit"])]),m(e)])}const oe=D(O,[["render",W],["__scopeId","data-v-ffdce6ed"]]);export{oe as default};
